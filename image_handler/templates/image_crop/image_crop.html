{% extends 'default_django_project/base.html' %}
{% load static %}
{% block extrastyle %}
    <link rel="stylesheet" href="{% static 'features/css/image_crop/image_crop.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.9/cropper.css"
          integrity="sha512-949FvIQOibfhLTgmNws4F3DVlYz3FmCRRhJznR22hx76SKkcpZiVV5Kwo0iwK9L6BFuY+6mpdqB2+vDIGVuyHg=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.9/cropper.min.css"
          integrity="sha512-w+u2vZqMNUVngx+0GVZYM21Qm093kAexjueWOv9e9nIeYJb1iEfiHC7Y+VvmP/tviQyA5IR32mwN/5hTEJx6Ng=="
          crossorigin="anonymous"/>

    {#    <link rel="stylesheet" href="https://unpkg.com/jcrop/dist/jcrop.css">#}
{% endblock %}
{% block side_navigation %}
    {% include 'base_site/side_navigation.html' %}
{% endblock %}
{% block breadcrumbs %}
    {% include 'base_site/breadcrumbs.html' with data=data_breadcrumb %}
{% endblock %}
{% block content %}
    <div class="main-content">
        <div class="container">
            <div class="row">
                <div class="card">
                    <div class="card-header">
                        <h6>Crop Image</h6>
                    </div>
                    <div class="card-body">

                        <!-- FORM TO UPLOAD THE IMAGES -->
                        <form method="post" enctype="multipart/form-data" id="formUpload">
                            {% csrf_token %}
                            {#                                                        <div class="form-group">#}
                            {#                                                            <label>Select Image: </label>#}
                            {#                                                            #}
                            {#                                                            {{ form.x }}#}
                            {#                                                            {{ form.y }}#}
                            {#                                                            {{ form.width }}#}
                            {#                                                            {{ form.height }}#}
                            {#                                                            {{ form.file }}#}
                            {#                                                            {{ form.label }}<br>#}
                            {#                                                            {{ form.help_text }}#}
                            {#                                                            <small class="form-text text-muted">Help text written here</small>#}
                            {#                                                        </div>#}
                            <div class="form-group">
                                <label for="id_file">Example file input</label>
                                <input type="hidden" id="id_x" name="x">
                                <input type="hidden" id="id_y" name="y">
                                <input type="hidden" id="id_width" name="width">
                                <input type="hidden" id="id_height" name="height">
                                <input type="file" class="form-control-file" id="id_file" name="file">
                            </div>
                        </form>


                        <!-- MODAL TO CROP THE IMAGE -->
                        <div class="modal" id="modalCrop">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h4 class="modal-title">Crop the photo</h4>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>

                                    </div>
                                    <div class="modal-body">
                                        <div class="image-container">
                                            <img src="" id="image">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="btn-group pull-left" role="group">
                                            <button type="button" class="btn btn-default js-zoom-in">
                                                <i class="fa fa-search-plus" aria-hidden="true"></i>
                                            </button>
                                            <button type="button" class="btn btn-default js-zoom-out">
                                                <i class="fa fa-search-minus" aria-hidden="true"></i>
                                            </button>
                                        </div>
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Nevermind
                                        </button>
                                        <button type="button" class="btn btn-primary js-crop-and-upload">Crop and
                                            upload
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CONTAINER TO DISPLAY THE CROPPED IMAGES -->
                        <div class="row" style="margin-top: 20px">
                            {% for photo in photos %}
                                <div class="col-sm-4 col-md-3">

                                    <img src="{{ photo.file.url }}" class="thumbnail">
                                    {#                                    <img src="{{ photo.file.url }}" width="200px" height="200px">#}
                                </div>
                            {% endfor %}
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.9/cropper.js"
            integrity="sha512-oqBsjjSHWqkDx4UKoU+5IUZN2nW2qDp2GFSKw9+mcFm+ZywqfBKp79nfWmGPco2wzTWuE46XpjtCjZ9tFmI12g=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cropper/1.0.1/jquery-cropper.min.js"
            integrity="sha512-V8cSoC5qfk40d43a+VhrTEPf8G9dfWlEJgvLSiq2T2BmgGRmZzB8dGe7XAABQrWj3sEfrR5xjYICTY4eJr76QQ=="
            crossorigin="anonymous"></script>

    <script type="text/javascript"
            src="{% static 'features/js/image_crop/hide_image_overlay.js' %}"></script>
    <script type="text/javascript"
            src="{% static '/features/js/image_crop/image_cropperjs.js' %}"></script>
{% endblock %}